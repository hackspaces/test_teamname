<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Team Management</title>
    <script src="https://unpkg.com/htmx.org@1.9.4"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            max-width: 1000px;
            margin: 0 auto;
        }
        h1, h2, h3 {
            color: #333;
        }
        .container {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 30px;
        }
        .card {
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 15px;
            margin-bottom: 15px;
            background-color: #f9f9f9;
        }
        .team-list {
            border-right: 1px solid #ddd;
            padding-right: 20px;
        }
        .team-detail {
            padding-left: 10px;
        }
        button, input[type="submit"] {
            background-color: #4CAF50;
            border: none;
            color: white;
            padding: 8px 16px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 14px;
            margin: 4px 2px;
            cursor: pointer;
            border-radius: 4px;
        }
        button.danger {
            background-color: #f44336;
        }
        form {
            margin-bottom: 20px;
        }
        input, select {
            padding: 8px;
            margin: 5px 0;
            display: block;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-sizing: border-box;
            width: 100%;
        }
        .member-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            border-bottom: 1px solid #eee;
        }
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <h1>Team Management</h1>
    
    <div class="container">
        <div class="team-list">
            <h2>Teams</h2>
            
            <div class="card">
                <h3>Add Team</h3>
                <form hx-post="/teams" hx-target="#teams-container" hx-swap="innerHTML">
                    <input type="text" name="name" placeholder="Team Name" required>
                    <input type="submit" value="Add Team">
                </form>
            </div>
            
            <div id="teams-container">
                {% include "partials/teams_list.html" %}
            </div>
        </div>
        
        <div class="team-detail" id="team-detail">
            <h2>Select a team to view details</h2>
        </div>
    </div>

    <!-- Template partials -->
    {% block partials %}
        <template id="team-detail-template">
            <div class="card">
                <h2>{{ team.name }}</h2>
                
                <div class="member-form">
                    <h3>Add Team Member</h3>
                    <form hx-post="/teams/{{ team.id }}/members" hx-target="#members-container" hx-swap="innerHTML">
                        <input type="text" name="name" placeholder="Member Name" required>
                        <input type="text" name="role" placeholder="Role" required>
                        <input type="submit" value="Add Member">
                    </form>
                </div>
                
                <h3>Team Members</h3>
                <div id="members-container">
                    <!-- Members will be loaded here -->
                </div>
            </div>
        </template>
    {% endblock %}

    <!-- Partials for HTMX - these are rendered server-side but included here for reference -->
    <div class="hidden">
        {% include "partials/teams_list.html" %}
        {% include "partials/team_detail.html" %}
        {% include "partials/members_list.html" %}
    </div>
</body>
</html>

<!-- These templates would be in separate files in the templates/partials directory -->
{% macro teams_list() %}
<div id="teams-list">
    {% for team in teams %}
    <div class="team-item">
        <button 
            hx-get="/teams/{{ team.id }}" 
            hx-target="#team-detail" 
            hx-swap="innerHTML">
            {{ team.name }}
        </button>
    </div>
    {% else %}
    <p>No teams yet. Add a team to get started.</p>
    {% endfor %}
</div>
{% endmacro %}

{% macro team_detail() %}
<div class="card">
    <h2>{{ team.name }}</h2>
    
    <div class="member-form">
        <h3>Add Team Member</h3>
        <form hx-post="/teams/{{ team.id }}/members" hx-target="#members-container" hx-swap="innerHTML">
            <input type="text" name="name" placeholder="Member Name" required>
            <input type="text" name="role" placeholder="Role" required>
            <input type="submit" value="Add Member">
        </form>
    </div>
    
    <h3>Team Members</h3>
    <div id="members-container">
        {% include "partials/members_list.html" %}
    </div>
</div>
{% endmacro %}

{% macro members_list() %}
<div id="members-list">
    {% for member in members %}
    <div class="member-item">
        <div>
            <strong>{{ member.name }}</strong> - {{ member.role }}
        </div>
        <button 
            class="danger"
            hx-delete="/members/{{ member.id }}" 
            hx-target="#members-container" 
            hx-swap="innerHTML"
            hx-confirm="Are you sure you want to remove this member?">
            Remove
        </button>
    </div>
    {% else %}
    <p>No members in this team yet.</p>
    {% endfor %}
</div>
{% endmacro %}